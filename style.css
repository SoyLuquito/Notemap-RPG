:root {
    --primary: #3b82f6;
    --bg-dark: #0f172a;
    --glass: rgba(15, 23, 42, 0.95);
    --border: rgba(255, 255, 255, 0.1);
    --text: #f8fafc;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body, html { 
    margin: 0; padding: 0; width: 100%; height: 100%; 
    overflow: hidden; background: #000; color: var(--text);
    font-family: 'Inter', sans-serif;
    position: fixed; touch-action: none;
}

canvas { display: block; position: fixed; top: 0; left: 0; z-index: 0; }

/* HUD */
.hud-top { position: fixed; top: env(safe-area-inset-top, 20px); left: 15px; right: 15px; display: flex; justify-content: space-between; pointer-events: none; z-index: 500; }
.btn-main, .map-info { pointer-events: auto; background: var(--glass); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 12px; padding: 10px 15px; color: white; display: flex; align-items: center; gap: 8px; font-weight: 600; cursor: pointer; }
.map-selector-wrapper select { appearance: none; border: none; background: transparent; color: white; font-weight: 600; }

/* Sidebar Mobile-First */
.sidebar { 
    position: fixed; left: 0; top: 0; height: 100%; width: 320px; 
    background: var(--bg-dark); border-right: 1px solid var(--border); 
    z-index: 1100; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
}
.sidebar.hidden { transform: translateX(-100%); }
.side-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
.side-list { flex: 1; overflow-y: auto; padding: 10px; }
.side-item-custom { 
    padding: 15px; background: rgba(255,255,255,0.03); border-radius: 12px; 
    margin-bottom: 10px; display: flex; align-items: center; gap: 15px; border: 1px solid var(--border);
}

/* Modal Estilo Bottom Sheet (Mobile) */
.modal-overlay { 
    position: fixed; inset: 0; background: rgba(0,0,0,0.7); 
    z-index: 1200; display: flex; align-items: flex-end; justify-content: center;
}
.modal-content { 
    background: var(--bg-dark); width: 100%; max-width: 500px;
    border-radius: 24px 24px 0 0; border: 1px solid var(--border);
    padding-bottom: env(safe-area-inset-bottom, 20px);
    transform: translateY(0); transition: 0.3s;
}
.drag-handle { width: 40px; height: 5px; background: var(--border); border-radius: 10px; margin: 12px auto; }
.scroll-area { max-height: 40vh; overflow-y: auto; padding: 5px; margin-bottom: 15px; font-size: 15px; line-height: 1.5; color: #cbd5e1; }

/* Grid de Ícones Otimizada */
.icon-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 15px; }
.icon-item { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; background: #1e293b; border-radius: 10px; border: 2px solid transparent; }
.icon-item.selected { border-color: var(--primary); background: rgba(59,130,246,0.2); }

/* Toolbar Mobile */
.mobile-toolbar { 
    position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); 
    background: var(--glass); border: 1px solid var(--border); border-radius: 20px; 
    display: none; padding: 8px; gap: 8px; z-index: 1000; box-shadow: 0 8px 32px rgba(0,0,0,0.4);
}
.tool-btn { 
    background: none; border: none; color: white; padding: 12px 20px; 
    border-radius: 15px; display: flex; align-items: center; gap: 8px; opacity: 0.5;
}
.tool-btn.active { opacity: 1; background: var(--primary); }
.tool-btn span { font-weight: 700; font-size: 13px; }

/* Adaptação Desktop */
@media (min-width: 769px) {
    .modal-overlay { align-items: center; }
    .modal-content { border-radius: 24px; width: 450px; }
    .drag-handle { display: none; }
}

@media (max-width: 768px) {
    .mobile-toolbar { display: flex; }
    .sidebar { width: 100%; } /* Lista ocupa a tela toda no mobile para facilitar leitura */
}

input, textarea, select { width: 100%; background: #1e293b; border: 1px solid var(--border); padding: 12px; border-radius: 12px; color: white; font-size: 16px; } /* 16px evita zoom automático no iOS */
.btn-primary { width: 100%; background: var(--primary); border: none; padding: 15px; border-radius: 12px; color: white; font-weight: 700; font-size: 16px; }
.hidden { display: none !important; }